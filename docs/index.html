<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Jean-Francois Denise">
<title>WildFly Glow Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>WildFly Glow Documentation</h1>
<div class="details">
<span id="author" class="author">Jean-Francois Denise</span><br>
<span id="revnumber">version 1.4.0.Final,</span>
<span id="revdate">2025-03-25T11:39:14Z</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#glow_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_automatic_identification_of_wildfly_galleon_layers">1.1. Automatic identification of WildFly Galleon Layers</a></li>
<li><a href="#_centralized_knowledge_of_wildfly_galleon_feature_packs">1.2. Centralized knowledge of WildFly Galleon Feature-packs.</a></li>
<li><a href="#_incubating_feature_packs">1.3. Incubating feature-packs.</a></li>
<li><a href="#_going_beyond_discovered_galleon_layers">1.4. Going beyond discovered Galleon Layers</a></li>
<li><a href="#_wildfly_glow_tooling">1.5. WildFly Glow tooling</a></li>
<li><a href="#_support_for_wildfly_stability">1.6. Support for WildFly Stability</a></li>
</ul>
</li>
<li><a href="#glow_cli">2. WildFly Glow Command Line</a>
<ul class="sectlevel2">
<li><a href="#_maven_configuration">2.1. Maven configuration</a></li>
</ul>
</li>
<li><a href="#glow_wildfly_maven_plugin">3. WildFly Maven Plugin integration</a>
<ul class="sectlevel2">
<li><a href="#_specifying_a_wildfly_version">3.1. Specifying a WildFly version</a></li>
<li><a href="#_adding_add_ons">3.2. Adding add-ons</a></li>
<li><a href="#_configuring_add_ons">3.3. Configuring add-ons</a></li>
<li><a href="#_specifying_the_cloud_execution_context">3.4. Specifying the cloud execution context</a></li>
<li><a href="#_ha_high_availability_support">3.5. HA (High Availability) support</a></li>
<li><a href="#_dry_run">3.6. Dry-run</a></li>
<li><a href="#_error_handling">3.7. Error handling</a></li>
<li><a href="#_support_for_wildfly_preview">3.8. Support for WildFly Preview</a></li>
<li><a href="#_specifying_additional_galleon_layers">3.9. Specifying additional Galleon Layers</a></li>
<li><a href="#_excluding_archives">3.10. Excluding archives</a></li>
<li><a href="#_enabling_spaces">3.11. Enabling spaces</a></li>
<li><a href="#_printing_matching_rules">3.12. Printing matching rules</a></li>
</ul>
</li>
<li><a href="#_wildfly_glow_arquillian_maven_plugin">4. WildFly Glow Arquillian Maven plugin</a>
<ul class="sectlevel2">
<li><a href="#_selecting_a_surefire_execution_to_scan">4.1. Selecting a surefire execution to scan</a></li>
<li><a href="#_aggregating_multiple_server_configurations_in_the_same_provisioning_xml">4.2. Aggregating multiple server configurations in the same provisioning.xml</a></li>
<li><a href="#_retrieving_the_test_classes_from_maven_dependencies">4.3. Retrieving the test classes from Maven dependencies</a></li>
<li><a href="#_specifying_an_execution_context">4.4. Specifying an execution context</a></li>
<li><a href="#_specifying_an_execution_profile">4.5. Specifying an execution profile</a></li>
<li><a href="#_using_wildfly_preview_server">4.6. Using WildFly Preview server</a></li>
<li><a href="#_specifying_a_wildfly_server_version">4.7. Specifying a WildFly server version</a></li>
<li><a href="#_using_a_specific_set_of_galleon_feature_packs">4.8. Using a specific set of Galleon feature-packs</a></li>
<li><a href="#_understanding_which_rule_selected_a_given_galleon_layer">4.9. Understanding which rule selected a given Galleon layer</a></li>
<li><a href="#_a_simple_pom_xml_file_extract">4.10. A simple pom.xml file extract</a></li>
<li><a href="#_a_custom_pom_xml_file_extract">4.11. A custom pom.xml file extract</a></li>
<li><a href="#_goals_overview">4.12. Goals overview</a></li>
<li><a href="#_help">4.13. help</a></li>
<li><a href="#_scan">4.14. scan</a></li>
</ul>
</li>
<li><a href="#glow_server">5. Support for latest WildFly</a></li>
<li><a href="#jbang">6. Running WildFly with JBang</a>
<ul class="sectlevel2">
<li><a href="#_enabling_wildfly_glow_integration_from_jbang">6.1. Enabling WildFly Glow integration from JBang</a></li>
<li><a href="#_glow_arguments">6.2. Glow arguments</a></li>
<li><a href="#_examples">6.3. Examples</a></li>
<li><a href="#_ai_chat_example">6.4. AI Chat Example</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>&#169; 2023 The original authors.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="glow_introduction"><a class="anchor" href="#glow_introduction"></a><a class="link" href="#glow_introduction">1. Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>WildFly Glow is an evolution of the WildFly <a href="https://docs.wildfly.org/galleon/">Galleon</a> provisioning tooling.</p>
</div>
<div class="paragraph">
<p>The goal of this project is to offer tooling allowing to identify the set of Galleon Feature-packs and Layers that are required
by your application. The entry-point of this discovery is your application.</p>
</div>
<div class="sect2">
<h3 id="_automatic_identification_of_wildfly_galleon_layers"><a class="anchor" href="#_automatic_identification_of_wildfly_galleon_layers"></a><a class="link" href="#_automatic_identification_of_wildfly_galleon_layers">1.1. Automatic identification of WildFly Galleon Layers</a></h3>
<div class="paragraph">
<p>Today, in order to trim a WildFly server to fit the application requirements, you have to first identify the
set of WildFly Galleon <a href="https://docs.wildfly.org/30/Galleon_Guide.html#wildfly_galleon_layers">Layers</a> to use.</p>
</div>
<div class="paragraph">
<p>WildFly Glow identifies the Layers for you by scanning your application war (jar or ear) files.</p>
</div>
<div class="paragraph">
<p>This application to Galleon Layers mapping is based on rules contained in WildFly Galleon Layers (Starting WildFly 29).
These rules express the Java types and artifacts (XML descriptors, properties files, &#8230;&#8203;)
that are bound to the usage of a given Galleon Layer. An example of rule can be found in the <a href="https://github.com/wildfly/wildfly/blob/30.0.0.Final/ee-feature-pack/galleon-shared/src/main/resources/layers/standalone/jaxrs/layer-spec.xml#L8">jaxrs</a> Layer.</p>
</div>
<div class="paragraph">
<p>Once the Layers are identified, the Galleon Feature-packs that define them are selected and included.</p>
</div>
</div>
<div class="sect2">
<h3 id="_centralized_knowledge_of_wildfly_galleon_feature_packs"><a class="anchor" href="#_centralized_knowledge_of_wildfly_galleon_feature_packs"></a><a class="link" href="#_centralized_knowledge_of_wildfly_galleon_feature_packs">1.2. Centralized knowledge of WildFly Galleon Feature-packs.</a></h3>
<div class="paragraph">
<p>WildFly can be extended with additional Galleon Feature-packs (e.g.: datasources, gRPC, keycloak, cloud, myfaces, resteasy-spring, &#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>WildFly Glow has, per WildFly version, the knowledge of some compatible Galleon Feature-packs (this information is stored in
<a href="https://github.com/wildfly/wildfly-galleon-feature-packs/tree/release">this</a> github project).</p>
</div>
<div class="paragraph">
<p>In order for these extras Feature-packs to be recognized by WildFly Glow, they must have their defined Layers annotated with rules.</p>
</div>
</div>
<div class="sect2">
<h3 id="_incubating_feature_packs"><a class="anchor" href="#_incubating_feature_packs"></a><a class="link" href="#_incubating_feature_packs">1.3. Incubating feature-packs.</a></h3>
<div class="paragraph">
<p>Feature-packs that are developed outside of the WildFly feature process can be registered in the "incubating" space.
This space can be explicitly enabled when discovering provisioning configuration.
WildFly Glow has, per WildFly version, the knowledge of 'incubating' compatible Galleon Feature-packs (this information is stored in
<a href="https://github.com/wildfly/wildfly-galleon-feature-packs/tree/main/spaces/incubating">this</a> directory).</p>
</div>
<div class="paragraph">
<p>In order for these extras feature-packs to be recognized by WildFly Glow, they must have their defined Layers annotated with rules.</p>
</div>
</div>
<div class="sect2">
<h3 id="_going_beyond_discovered_galleon_layers"><a class="anchor" href="#_going_beyond_discovered_galleon_layers"></a><a class="link" href="#_going_beyond_discovered_galleon_layers">1.4. Going beyond discovered Galleon Layers</a></h3>
<div class="paragraph">
<p>WildFly Glow does more than identifying Galleon Feature-packs and Layers.</p>
</div>
<div class="sect3">
<h4 id="_provisioning"><a class="anchor" href="#_provisioning"></a><a class="link" href="#_provisioning">1.4.1. Provisioning</a></h4>
<div class="paragraph">
<p>WildFly Glow CLI allows you to provision a WildFly server, a WildFly Bootable JAR, produce a Docker image and deploy your application to OpenShift.</p>
</div>
<div class="sect4">
<h5 id="_openshift_provisioning"><a class="anchor" href="#_openshift_provisioning"></a><a class="link" href="#_openshift_provisioning">OpenShift provisioning</a></h5>
<div class="paragraph">
<p>A good way to start with OpenShift is by using the <a href="https://developers.redhat.com/developer-sandbox">OpenShift Sandbox</a>.
You can create a cluster in few clicks.</p>
</div>
<div class="sect5">
<h6 id="_pre_requisites"><a class="anchor" href="#_pre_requisites"></a><a class="link" href="#_pre_requisites">Pre-requisites</a></h6>
<div class="paragraph">
<p>Once you have a custer up and running, there are few steps needed in order for WildFly Glow to log onto the cluster:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download the <code>oc</code> command from your cluster. Click on the <code>?</code> icon on the top right corner of the OpenShift admin console, then select <code>Command Line Tools</code>,
then download <code>oc</code> for your platform.</p>
</li>
<li>
<p>Retrieve the command to log to the Cluster. Click on your user name on the top right corner,
then select <code>Copy login command</code>. This will open a page, copy the login command.
That should be something like: <code>oc login --token=sha256~ITC16QZxiVk5vm7NCdrRIx2yqvlB-L_6Wg-BrtIhnLE --server=https://api.sandbox-m3.1530.p1.openshiftapps.com:6443</code></p>
</li>
<li>
<p>Paste the login command in your terminal.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>WildFly Glow can now interact with your cluster.</p>
</div>
</div>
<div class="sect5">
<h6 id="_deploying_to_openshift"><a class="anchor" href="#_deploying_to_openshift"></a><a class="link" href="#_deploying_to_openshift">Deploying to OpenShift</a></h6>
<div class="paragraph">
<p>That is done from the <code>wildfly-glow</code> command line tool. You can specify <code>--cloud --provision OPENSHIFT</code> to the <code>scan</code> command. For example:</p>
</div>
<div class="paragraph">
<p><code>wildfly-glow scan examples/kitchensink.war --cloud --provision OPENSHIFT</code></p>
</div>
<div class="paragraph">
<p>The kitchensink war file is analyzed, the Galleon configuration is generated, then both the war and the configuration are sent to OpenShift to start a server
provisioning and create your application deployment.</p>
</div>
<div class="paragraph">
<p>At the end of the build, the application is deployed and the route to your application inside the cluster is printed.
Use it to interact with your application.</p>
</div>
<div class="paragraph">
<p>Note: The OpenShift resources yaml files are generated in the directory <code>server-&lt;wildfly version&gt;/resources</code></p>
</div>
<div class="paragraph">
<p>Note: the support for OpenShift is currently specified by this WildFly Glow project <a href="https://github.com/wildfly/wildfly-glow/issues/49">GitHub Issue</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_automatic_deployment_of_postgresql_mysql_mariadb_amq_jms_broker_and_keycloak"><a class="anchor" href="#_automatic_deployment_of_postgresql_mysql_mariadb_amq_jms_broker_and_keycloak"></a><a class="link" href="#_automatic_deployment_of_postgresql_mysql_mariadb_amq_jms_broker_and_keycloak">Automatic deployment of PostGreSQL, MySQL, MariaDB, AMQ JMS Broker and Keycloak</a></h6>
<div class="paragraph">
<p>If WildFly Glow detects the need for these technologies, it will automatically deploy the required servers and will bound the application to them.</p>
</div>
</div>
<div class="sect5">
<h6 id="_high_availability_support"><a class="anchor" href="#_high_availability_support"></a><a class="link" href="#_high_availability_support">High Availability support</a></h6>
<div class="paragraph">
<p>When the HA profile is enabled, 2 pods will be created for the deployment.
The JGroups <code>dns.DNS_PING</code> protocol is enabled for the members of the cluster to discover each others.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_openshift_dry_run_mode"><a class="anchor" href="#_openshift_dry_run_mode"></a><a class="link" href="#_openshift_dry_run_mode">1.4.2. OpenShift dry-run mode</a></h4>
<div class="paragraph">
<p>When using the <code>--dry-run</code> option, WildFly glow will not interact with the cluster but will generate all the needed resources that are required to build
and deploy your application in the cluster of your choice. You can then assemble the images and deploy to your cluster in a flexible way.
The generated resources allow, for example, to setup a <a href="https://tekton.dev/">Tekton</a> pipeline to produce images,
and use <a href="https://argoproj.github.io/cd/">Argo CD</a> to manage your k8s resources.</p>
</div>
<div class="sect4">
<h5 id="_docker_files_for_the_server_and_application_images"><a class="anchor" href="#_docker_files_for_the_server_and_application_images"></a><a class="link" href="#_docker_files_for_the_server_and_application_images">Docker files for the server and application images</a></h5>
<div class="paragraph">
<p>WildFly Glow separates the build of your application image into 2 steps. A first step to build the server image that only contains the WildFly server.
A second step that, from the server image, produces an application image that contains the deployments, the WildFly CLI script (if any) and the bash initialization script (if any).</p>
</div>
<div class="paragraph">
<p>In order to share the server image between various applications, a server image tag is computed based on all that makes the content of the server unique:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The generated provisioning XML file</p>
</li>
<li>
<p>Env variables (if any) used at provisioning time.</p>
</li>
<li>
<p>WildFly channel (if any) used at provisioning time.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_bulding_and_pushing_the_server_image"><a class="anchor" href="#_bulding_and_pushing_the_server_image"></a><a class="link" href="#_bulding_and_pushing_the_server_image">Bulding and pushing the server image</a></h6>
<div class="paragraph">
<p>Once WildFly Glow has generated the resources, you need to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provision the server using the generated <code>&lt;server-version&gt;/galleon/provisioning.xml</code> file (using Galleon CLI) inside the directory <code>&lt;server-version&gt;/docker/server/server</code>.</p>
</li>
<li>
<p>Build and push the server image using the server tag generated in <code>&lt;server-version&gt;/docker/image.properties</code> and the docker file <code>&lt;server-version&gt;/docker/server/Dockerfile</code>.
Makes sure to run the build inside the directory <code>&lt;server-version&gt;/docker/server</code>, that is the expected build docker context.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_bulding_and_pushing_the_application_image"><a class="anchor" href="#_bulding_and_pushing_the_application_image"></a><a class="link" href="#_bulding_and_pushing_the_application_image">Bulding and pushing the application image</a></h6>
<div class="paragraph">
<p>Once you have pushed the server in a container image repository, you need to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <code>&lt;server-version&gt;/docker/app/Dockerfile</code> file replace the <code>WILDFLY_GLOW_SERVER_IMAGE_REPOSITORY</code> placeholder with the pushed server image repository.</p>
</li>
<li>
<p>Build and push the application image using the application tag generated in <code>&lt;server-version&gt;/docker/image.properties</code> and the docker file <code>&lt;server-version&gt;/docker/app/Dockerfile</code>.
Makes sure to run the build inside the directory <code>&lt;server-version&gt;/docker/app</code>, that is the expected build docker context.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_updating_the_k8s_deployment_with_the_generated_application_image"><a class="anchor" href="#_updating_the_k8s_deployment_with_the_generated_application_image"></a><a class="link" href="#_updating_the_k8s_deployment_with_the_generated_application_image">Updating the k8s deployment with the generated application image</a></h5>
<div class="paragraph">
<p>The generated deployment (or the statefulSet in case of HA application) in <code>&lt;server-version&gt;/resources/deployment/</code> directory references the container image using the placeholder <code>WILDFLY_GLOW_APP_IMAGE_REPOSITORY</code>. Replaces it
with the actual application image repository.</p>
</div>
<div class="paragraph">
<p>You are good to go. You can now create the k8s resources in your cluster.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_wildfly_additional_features_discovery"><a class="anchor" href="#_wildfly_additional_features_discovery"></a><a class="link" href="#_wildfly_additional_features_discovery">1.4.3. WildFly additional features discovery</a></h4>
<div class="paragraph">
<p>Some WildFly server features can&#8217;t be discovered by scanning application deployment. A good example is the usage of SSL to secure the http
access. Another one is the need for WildFly tooling (e,g,: WildFly CLI, elytron tooling, &#8230;&#8203;).
WildFly Glow allows you to include, according to what has been discovered in the deployment, a set of WildFly features called <code>add-ons</code> that makes sense
for your application.</p>
</div>
</div>
<div class="sect3">
<h4 id="_connection_to_databases"><a class="anchor" href="#_connection_to_databases"></a><a class="link" href="#_connection_to_databases">1.4.4. Connection to databases</a></h4>
<div class="paragraph">
<p>WildFly Glow detects that your application requires a datasource and will suggest you with database <code>add-ons</code> to be included in order
to connect to the DB of your choice (postgresql, mysql, &#8230;&#8203;).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wildfly_glow_tooling"><a class="anchor" href="#_wildfly_glow_tooling"></a><a class="link" href="#_wildfly_glow_tooling">1.5. WildFly Glow tooling</a></h3>
<div class="paragraph">
<p>WildFly Glow tooling is composed of 3 parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A Command Line interface (<code>wildfly-glow</code> CLI) that scan your deployment and can provision a WildFly server, a WildFly Bootable JAR and
a Docker image (to be deployed on Kubernetes). From the CLI you can discover the list of available <code>add-ons</code>, the list of WildFly server versions
you can use (the latest WildFly major release being the default).</p>
</li>
<li>
<p>An integration with the WildFly Maven plugin (Starting 5.0.0.Alpha2) <code>package</code> goal, to provision a WildFly server without specifying
Feature-packs and Layers.</p>
</li>
<li>
<p>A Maven plugin to scan Arquillian deployments in your tests and produce a <code>provisioning.xml</code> file that can be consumed by WildFly provisioning tooling.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_support_for_wildfly_stability"><a class="anchor" href="#_support_for_wildfly_stability"></a><a class="link" href="#_support_for_wildfly_stability">1.6. Support for WildFly Stability</a></h3>
<div class="paragraph">
<p>WildFly Glow CLI has a support
for <a href="http://docs.wildfly.org/32/Admin_Guide.html#Feature_stability_levels">WildFly Stability</a>.</p>
</div>
<div class="paragraph">
<p>WildFly Glow can detect and report that some of the discovered Galleon layers contain
content that are only available at a given stability and advise you to enable this stability level
(by using the <code>--config-stability-level=&lt;stability level&gt;</code> option.</p>
</div>
<div class="paragraph">
<p>When provisioning a server, if a stability level has been specified, WildFly Glow will display how
a WildFly server must be started to enable the stability level. For example: <code>standalone.sh --stability=preview</code></p>
</div>
<div class="paragraph">
<p>When provisioning for OpenShift, if a stability level has been specified, WildFly Glow will configure the generated OpenShift Deployment
to start the server with the required stability level.</p>
</div>
<div class="paragraph">
<p>To list the options related to the WildFly stability feature, call <code>wildfly-glow scan --help</code> and look for <code>--*stability-level</code> options.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="glow_cli"><a class="anchor" href="#glow_cli"></a><a class="link" href="#glow_cli">2. WildFly Glow Command Line</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Download the latest WildFly Glow CLI zip file from github <a href="https://github.com/wildfly/wildfly-glow/releases">releases</a></p>
</li>
<li>
<p>Unzip the file <code>wildfly-glow-&lt;version&gt;.zip</code></p>
</li>
<li>
<p>cd <code>wildfly-glow-&lt;version&gt;</code></p>
</li>
<li>
<p>To display the CLI help call: <code>./wildfly-glow</code></p>
</li>
<li>
<p>To install the automatic CLI commands completion call: <code>source &lt;(./wildfly-glow completion)</code></p>
</li>
<li>
<p>To scan a first deployment call: <code>./wildfly-glow scan ./examples/kitchensink.war</code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_maven_configuration"><a class="anchor" href="#_maven_configuration"></a><a class="link" href="#_maven_configuration">2.1. Maven configuration</a></h3>
<div class="ulist">
<ul>
<li>
<p>For Maven resolution, the CLI reads your Maven <code>settings.xml</code> in default locations.</p>
</li>
<li>
<p>If your settings are in a custom location, you can use the <code>org.wildfly.glow.maven.settings.xml.url=&lt;url to your settings.xml file&gt;</code> system property to set it.</p>
</li>
<li>
<p>Glow enforces a set of Maven remote repositories: <code>central</code>, <code>jboss</code>, <code>redhat GA</code> and <code>spring</code>. You can disable it by using the
<code>org.wildfly.glow.maven.ignore.default.repos=true</code> system property.</p>
</li>
<li>
<p>If no local maven cache is found in the <code>settings.xml</code> file (or if no <code>settings.xml</code> file is found),
the <code>&lt;user home&gt;/.m2/repository</code> directory is used. You can specify a custom location using the
<code>maven.repo.local=&lt;absolute path to the local cache directory&gt;</code> system property.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="glow_wildfly_maven_plugin"><a class="anchor" href="#glow_wildfly_maven_plugin"></a><a class="link" href="#glow_wildfly_maven_plugin">3. WildFly Maven Plugin integration</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>WildFly Glow has been integrated in WildFly Maven Plugin <code>5.x</code> starting with <code>5.0.0.Alpha2</code> version.</p>
</div>
<div class="paragraph">
<p>When using version 4.2 of the <a href="http://github.com/wildfly/wildfly-maven-plugin">WildFly Maven Plugin</a>
you must specify the WildFly Galleon Feature-packs and Galleon Layers to use to provision WIldFly.
For example, a plugin configuration extract to provision WildFly for cloud with support to connect to <code>postgresql</code> database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;plugin&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly.plugins<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-maven-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;version&gt;</span>4.2.0.Final<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;configuration&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;feature-packs&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;feature-pack&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;location&gt;</span>org.wildfly:wildfly-galleon-pack:30.0.1.Final<span style="color:#070;font-weight:bold">&lt;/location&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/feature-pack&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;feature-pack&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;location&gt;</span>org.wildfly.cloud:wildfly-cloud-galleon-pack:5.0.0.Final<span style="color:#070;font-weight:bold">&lt;/location&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/feature-pack&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;feature-pack&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;location&gt;</span>org.wildfly:wildfly-datasources-galleon-pack:6.0.0.Final<span style="color:#070;font-weight:bold">&lt;/location&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/feature-pack&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/feature-packs&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;layers&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;layer&gt;</span>jaxrs-server<span style="color:#070;font-weight:bold">&lt;/layer&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;layer&gt;</span>postgresql-datasource<span style="color:#070;font-weight:bold">&lt;/layer&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/layers&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;runtime-name&gt;</span>ROOT.war<span style="color:#070;font-weight:bold">&lt;/runtime-name&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/configuration&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;executions&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;execution&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;goals&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;goal&gt;</span>package<span style="color:#070;font-weight:bold">&lt;/goal&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/goals&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/execution&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/executions&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/plugin&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The set of Feature-packs versions that are compatible with WildFly and the set of Galleon Layers that are required to properly execute your application
must be known and added to the configuration. This does create some complexity.</p>
</div>
<div class="paragraph">
<p>The integration of WildFly Glow in the WildFly Maven plugin allows to delegate to the plugin the provisioning configuration. The plugin scans your deployment
and provision a server based on what has been discovered.</p>
</div>
<div class="paragraph">
<p>The plugin configuration becomes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;plugin&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly.plugins<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-maven-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;version&gt;</span>5.0.0.Beta1<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;configuration&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;discover-provisioning-info</span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;runtime-name&gt;</span>ROOT.war<span style="color:#070;font-weight:bold">&lt;/runtime-name&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/configuration&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;executions&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;execution&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;goals&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;goal&gt;</span>package<span style="color:#070;font-weight:bold">&lt;/goal&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/goals&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/execution&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/executions&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/plugin&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When executing the plugin with such configuration, the set of discovered Feature-packs and Layers are used to provision the WildFly server.
In addition, provisioning information is displayed and the file
<code>target/glow-scan/provisioning.xml</code> is generated. This allows you to see what the plugin has discovered
and that it is in line with what you are expecting.</p>
</div>
<div class="sect2">
<h3 id="_specifying_a_wildfly_version"><a class="anchor" href="#_specifying_a_wildfly_version"></a><a class="link" href="#_specifying_a_wildfly_version">3.1. Specifying a WildFly version</a></h3>
<div class="paragraph">
<p>By default the latest WildFly version is used, you can specify a given WildFly version (starting with WildFly 29.0.0.Final). To do so extend
the <code>discover-provisioning-info</code> element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;discover-provisioning-info&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;version&gt;</span>30.0.0.Final<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/discover-provisioning-info&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_add_ons"><a class="anchor" href="#_adding_add_ons"></a><a class="link" href="#_adding_add_ons">3.2. Adding add-ons</a></h3>
<div class="paragraph">
<p>If your application requires some additional features not discovered in your deployment, you can specify add-ons:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;discover-provisioning-info&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;add-ons&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;add-on&gt;</span>ssl<span style="color:#070;font-weight:bold">&lt;/add-on&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;add-on&gt;</span>openapi<span style="color:#070;font-weight:bold">&lt;/add-on&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/add-ons&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/discover-provisioning-info&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>According to what has been discovered in your deployment, the plugin can suggest a set of add-ons that would make sense for your application.
You should see the following message being displayed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Some suggestions have been found. You could enable suggestions with --suggest option (if using the WildFly Glow CLI) or &lt;suggest&gt;true&lt;/suggest&gt; (if using the WildFly Maven Plugin).</pre>
</div>
</div>
<div class="paragraph">
<p>To print the suggestions, evolve the <code>discover-provisioning-info</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;discover-provisioning-info&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;suggest&gt;</span>true<span style="color:#070;font-weight:bold">&lt;/suggest&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/discover-provisioning-info&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note: In order to find-out the set of possible add-ons you could add, you could also use
the WildFly Glow CLI command line that offers a command to list the available add-ons for a given WildFly version.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_add_ons"><a class="anchor" href="#_configuring_add_ons"></a><a class="link" href="#_configuring_add_ons">3.3. Configuring add-ons</a></h3>
<div class="paragraph">
<p>It can happen that the added add-on(s) require some environment variables to be set at server execution time. The plugin
will display the set of expected environment variables (and values) that you should set when starting the server.
For example, when adding the <code>postgresql</code> add-on, the following warning is displayed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>strongly suggested configuration
postgresql-datasource:
 - POSTGRESQL_DATABASE=Defines the database name to be used in the datasource’s `connection-url` property.
 - POSTGRESQL_JNDI=java:jboss/datasources/PostgreSQLDS
 - POSTGRESQL_PASSWORD=Defines the password for the datasource.
 - POSTGRESQL_USER=Defines the username for the datasource.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_the_cloud_execution_context"><a class="anchor" href="#_specifying_the_cloud_execution_context"></a><a class="link" href="#_specifying_the_cloud_execution_context">3.4. Specifying the cloud execution context</a></h3>
<div class="paragraph">
<p>If the application you are building targets a cloud execution extend the <code>discover-provisioning-info</code> element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;discover-provisioning-info&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;context&gt;</span>cloud<span style="color:#070;font-weight:bold">&lt;/context&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/discover-provisioning-info&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When cloud is enabled, some extra Galleon Feature-packs and Galleon Layers will be added to provision
a WildFly server that properly executes on OpenShift or Kubernetes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ha_high_availability_support"><a class="anchor" href="#_ha_high_availability_support"></a><a class="link" href="#_ha_high_availability_support">3.5. HA (High Availability) support</a></h3>
<div class="paragraph">
<p>High availability support implies that some Galleon Layers are included and some are excluded in order to provision a valid HA
server.</p>
</div>
<div class="paragraph">
<p>For example, to provision an HA server to run distributed ejb, when using WildFly Maven Plugin 4.2, you would have to specify:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;layers&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;layer&gt;</span>jaxrs-server<span style="color:#070;font-weight:bold">&lt;/layer&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;layer&gt;</span>ejb-lite<span style="color:#070;font-weight:bold">&lt;/layer&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;layer&gt;</span>ejb-dist-cache<span style="color:#070;font-weight:bold">&lt;/layer&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/layers&gt;</span>
<span style="color:#070;font-weight:bold">&lt;excluded-layers&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;layer&gt;</span>ejb-local-cache<span style="color:#070;font-weight:bold">&lt;/layer&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/excluded-layers&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the local ejb infinispan cache is excluded and the ejb infinispan distributed one is added.</p>
</div>
<div class="paragraph">
<p>WildFly Glow handles that for you, simply evolve the <code>discover-provisioning-info</code> element with the <code>ha</code> profile:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;discover-provisioning-info&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;profile&gt;</span>ha<span style="color:#070;font-weight:bold">&lt;/profile&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/discover-provisioning-info&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The Galleon Layers inclusions and exclusions are automatically handled.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dry_run"><a class="anchor" href="#_dry_run"></a><a class="link" href="#_dry_run">3.6. Dry-run</a></h3>
<div class="paragraph">
<p>You can configure the plugin to just scan the deployment and not provision a server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;discover-provisioning-info&gt;</span><span style="color:#070;font-weight:bold">&lt;/discover-provisioning-info&gt;</span>
<span style="color:#070;font-weight:bold">&lt;dry-run&gt;</span>true<span style="color:#070;font-weight:bold">&lt;/dry-run&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_error_handling"><a class="anchor" href="#_error_handling"></a><a class="link" href="#_error_handling">3.7. Error handling</a></h3>
<div class="paragraph">
<p>Some errors can be discovered by the plugin during deployment scanning. For example an <code>add-on</code> is required and must be added.
If some errors are found the plugin execution is aborted and you need to take an action (e.g.: add the missing <code>add-on</code>).
In some cases, it can appear that the error is actually not problematic and can be ignored, to do so, evolve the <code>discover-provisioning-info</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;discover-provisioning-info&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;failsOnError&gt;</span>false<span style="color:#070;font-weight:bold">&lt;/failsOnError&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/discover-provisioning-info&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_support_for_wildfly_preview"><a class="anchor" href="#_support_for_wildfly_preview"></a><a class="link" href="#_support_for_wildfly_preview">3.8. Support for WildFly Preview</a></h3>
<div class="paragraph">
<p>If you are targeting deployment to the WildFly Preview server, evolve the <code>discover-provisioning-info</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;discover-provisioning-info&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;preview&gt;</span>true<span style="color:#070;font-weight:bold">&lt;/preview&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/discover-provisioning-info&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_additional_galleon_layers"><a class="anchor" href="#_specifying_additional_galleon_layers"></a><a class="link" href="#_specifying_additional_galleon_layers">3.9. Specifying additional Galleon Layers</a></h3>
<div class="paragraph">
<p>In case your application is requiring some extras Galleon Layers due to the fact that some API usages are hidden in your implementation (e.g.:
Java reflection, usage of JNDI API), you can evolve the <code>discover-provisioning-info</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;discover-provisioning-info&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;layersForJndi&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;layer&gt;</span>mail<span style="color:#070;font-weight:bold">&lt;/layer&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/layersForJndi&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/discover-provisioning-info&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>mail</code> Galleon Layer is added.</p>
</div>
</div>
<div class="sect2">
<h3 id="_excluding_archives"><a class="anchor" href="#_excluding_archives"></a><a class="link" href="#_excluding_archives">3.10. Excluding archives</a></h3>
<div class="paragraph">
<p>In case your application packages some jars, you can exclude such jars from the scanning. To do so evolve the <code>discover-provisioning-info</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;discover-provisioning-info&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;excludedArchives&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;archive&gt;</span>foo.jar<span style="color:#070;font-weight:bold">&lt;/archive&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;archive&gt;</span>example*<span style="color:#070;font-weight:bold">&lt;/archive&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/excludedArchives&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/discover-provisioning-info&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_enabling_spaces"><a class="anchor" href="#_enabling_spaces"></a><a class="link" href="#_enabling_spaces">3.11. Enabling spaces</a></h3>
<div class="paragraph">
<p>In case you want to have access to feature-packs registered in some additional spaces (e.g.: in the 'incubating' space),
you can provide the list of spaces to enable. To do so evolve the <code>discover-provisioning-info</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;discover-provisioning-info&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;spaces&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;space&gt;</span>incubating<span style="color:#070;font-weight:bold">&lt;/space&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/spaces&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/discover-provisioning-info&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_printing_matching_rules"><a class="anchor" href="#_printing_matching_rules"></a><a class="link" href="#_printing_matching_rules">3.12. Printing matching rules</a></h3>
<div class="paragraph">
<p>You can print the rules that selected the Galleon Layers. To do so set the <code>&lt;verbose&gt;</code> argument.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;discover-provisioning-info&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;verbose&gt;</span>true<span style="color:#070;font-weight:bold">&lt;/verbose&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/discover-provisioning-info&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>An example of output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>...
layers inclusion rules
* ee-core-profile-server
  - BASE_LAYER
* ee-concurrency
  - JAVA_TYPE: [jakarta.enterprise.concurren.*]
* undertow-https
  - ADD_ON
...</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_wildfly_glow_arquillian_maven_plugin"><a class="anchor" href="#_wildfly_glow_arquillian_maven_plugin"></a><a class="link" href="#_wildfly_glow_arquillian_maven_plugin">4. WildFly Glow Arquillian Maven plugin</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Maven coordinates of the Maven plugin artifact are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly.glow<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>glow-arquillian-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;version&gt;</span>1.4.0.Final<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This Maven plugin is dedicated to help you automate WildFly provisioning when
using <a href="https://github.com/wildfly/wildfly-arquillian">Arquillian</a>.</p>
</div>
<div class="paragraph">
<p>The plugin should be run during test build phase, after the tests have been compiled but prior to any
WildFly provisioning plugin (<a href="http://github.com/wildfly/galleon">Galleon Maven plugin</a>,
<a href="http://github.com/wildfly/wildfly-maven-plugin">WildFly Maven plugin</a> or <a href="http://github.com/wildfly-extras/wildfly-jar-maven-plugin">WildFly Bootable JAR Maven plugin</a>) execution.</p>
</div>
<div class="paragraph">
<p>The tests deployments (returned by static methods annotated with the <code>@org.jboss.arquillian.container.test.api.Deployment</code> annotation),
are scanned by the plugin to discover the set of Galleon Layers.
It then generates the <code>target/glow-scan/provisioning.xml</code> file containing what has been discovered. This file can then be consumed
by provisioning tooling to do the actual server provisioning.</p>
</div>
<div class="paragraph">
<p>In order to validate that what the scanning has discovered is expected, you can configure the <code>wildfly-glow-arquillian-plugin</code>
maven plugin to contain the element <code>&lt;expected-discovery&gt;</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&lt;expected-discovery&gt;[cdi, ee-integration, ejb, ejb-lite, elytron-oidc-client, naming, servlet]==&gt;ee-core-profile-server,ejb,elytron-oidc-client&lt;/expected-discovery&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The left part of the arrow contains the list of the discovered Layers according to the scanning.
The right part is what will get provisioned. Composed of a base Layer (always <code>ee-core-profile-server</code>) and
a list of the discovered Layers that has been cleaned-up to avoid to include dependencies.</p>
</div>
<div class="paragraph">
<p>Note: In case the <code>ha</code> profile is enabled, you need to prefix the expected discovery with the <code>[ha]</code> prefix. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&lt;expected-discovery&gt;[ha][cdi, ee-integration, ejb, ejb-lite, elytron-oidc-client, naming, servlet]==&gt;ee-core-profile-server,ejb,elytron-oidc-client&lt;/expected-discovery&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>BTW: The <a href="https://github.com/wildfly/wildfly/tree/main/testsuite/integration">WildFly integration tests</a> contain
a lot of examples of WildFly Glow scanning executions that you can use as a starting-point.</p>
</div>
<div class="paragraph">
<p>In case the test depends on some not discoverable features, you have the ability to explicitly add <code>add-ons</code> to enrich
the set of provisioned Layers (using the <code>&lt;add-ons&gt;</code> configuration element).</p>
</div>
<div class="paragraph">
<p>In addition, it can happen that some errors are identified by WildFly Glow.
Some need to be fixed, some could be fine in the context of the tests. Errors that are fine in the context of the test
can be ignored using the <code>&lt;expected-errors&gt;</code> element.</p>
</div>
<div class="paragraph">
<p>Known WildFly Glow discovered errors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jakarta.naming.Context or InitialContext lookup</code>: In case some lookup is present in the test code
that could hide the usage of a Layer not discovered. You can configure the plugin with <code>&lt;add-layers-for-jndi&gt;</code>
to add the Layers that are required (if any) and hidden.</p>
</li>
<li>
<p><code>ambiguous resource injection</code>: An un-typed resource injection could hide a required Layer.
You can configure the plugin with <code>&lt;add-layers-for-jndi&gt;</code> to list the Layers that are required (if any) and hidden.</p>
</li>
<li>
<p><code>an add-on of the messaging family is expected by the messaging-activemq layer</code>. One of embedded or remoting messaging add-on is required.</p>
</li>
<li>
<p><code>unbound datasources error: &lt;name of ds&gt;</code>: A datasource is expected but not found in the deployment.
That is generally an error to ignore, the test itself should add the datasource during the setup.</p>
</li>
<li>
<p><code>no default datasource found error</code>: It has been identified that a default datasource is required.
That can be fixed by adding the add-on <code>h2-database:default</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can disable the check for errors by setting <code>&lt;check-errors&gt;false&lt;/check-errors&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Note: When <code>&lt;verbose&gt;true&lt;/verbose&gt;</code> is set, the list of expected errors can be different (it contains more details on the error),
make sure to suppress the expected errors when debugging or set <code>&lt;check-errors&gt;false&lt;/check-errors&gt;</code>.</p>
</div>
<div class="sect2">
<h3 id="_selecting_a_surefire_execution_to_scan"><a class="anchor" href="#_selecting_a_surefire_execution_to_scan"></a><a class="link" href="#_selecting_a_surefire_execution_to_scan">4.1. Selecting a surefire execution to scan</a></h3>
<div class="paragraph">
<p>You can select a given surefire execution to scan. To do so add the following element to the plugin configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;surefireExecutionForIncludedClasses&gt;</span>ts.surefire.clustering.microprofile<span style="color:#070;font-weight:bold">&lt;/surefireExecutionForIncludedClasses&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the tests executed by the surefire execution with id <code>ts.surefire.clustering.microprofile</code> are scanned.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aggregating_multiple_server_configurations_in_the_same_provisioning_xml"><a class="anchor" href="#_aggregating_multiple_server_configurations_in_the_same_provisioning_xml"></a><a class="link" href="#_aggregating_multiple_server_configurations_in_the_same_provisioning_xml">4.2. Aggregating multiple server configurations in the same provisioning.xml</a></h3>
<div class="paragraph">
<p>You can express an aggregate name that will be used to aggregate all discovery of multiple plugin executions inside the same provisioning.xml file.
Each execution of the plugin is creating a server configuration (e.g.: standalone.xml, standalone-ha.xml, &#8230;&#8203;) inside the same provisioning.xml file.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p>Execution 1 plugin configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;aggregate&gt;</span>wildfly-server<span style="color:#070;font-weight:bold">&lt;/aggregate&gt;</span>
<span style="color:#070;font-weight:bold">&lt;config-name&gt;</span>standalone-full-ha.xml<span style="color:#070;font-weight:bold">&lt;/config-name&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Execution 2 plugin configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;aggregate&gt;</span>wildfly-server<span style="color:#070;font-weight:bold">&lt;/aggregate&gt;</span>
<span style="color:#070;font-weight:bold">&lt;config-name&gt;</span>standalone.xml<span style="color:#070;font-weight:bold">&lt;/config-name&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example the generated provisioning.xml will be located in the <code>target/wildfly-server-glow/</code> directory.
The server configurations named <code>standalone.xml</code> and <code>standalone-full-ha.xml</code> will be generated and added to the same provisioning.xml file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_retrieving_the_test_classes_from_maven_dependencies"><a class="anchor" href="#_retrieving_the_test_classes_from_maven_dependencies"></a><a class="link" href="#_retrieving_the_test_classes_from_maven_dependencies">4.3. Retrieving the test classes from Maven dependencies</a></h3>
<div class="paragraph">
<p>By default the compiled test classes are scanned. In case the classes are coming from Maven dependencies,
the dependencies coordinates (<code>groupId:artifactId</code>) can be configured in the plugin. The version being retrieved from the Maven dependencies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;dependenciesToScan&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>org.foo:some-tests<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependenciesToScan&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_an_execution_context"><a class="anchor" href="#_specifying_an_execution_context"></a><a class="link" href="#_specifying_an_execution_context">4.4. Specifying an execution context</a></h3>
<div class="paragraph">
<p>By default the <code>bare-metal</code> context is used. In case you need to produce a server to be executed on the cloud,
use the <code>&lt;context&gt;cloud&lt;/context&gt;</code> element.</p>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_an_execution_profile"><a class="anchor" href="#_specifying_an_execution_profile"></a><a class="link" href="#_specifying_an_execution_profile">4.5. Specifying an execution profile</a></h3>
<div class="paragraph">
<p>In case you want to produce an High Available WildFly server, use the <code>&lt;profile&gt;ha&lt;/profile&gt;</code> element.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_wildfly_preview_server"><a class="anchor" href="#_using_wildfly_preview_server"></a><a class="link" href="#_using_wildfly_preview_server">4.6. Using WildFly Preview server</a></h3>
<div class="paragraph">
<p>In case you want to use a WildFly Preview server, use the <code>&lt;preview-server&gt;true&lt;/preview-server&gt;</code> element.</p>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_a_wildfly_server_version"><a class="anchor" href="#_specifying_a_wildfly_server_version"></a><a class="link" href="#_specifying_a_wildfly_server_version">4.7. Specifying a WildFly server version</a></h3>
<div class="paragraph">
<p>By default the latest WildFly server version is used.
In case you want to use a specific WildFly version, set the <code>&lt;server-version&gt;server version&lt;/server-version&gt;</code> element.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_a_specific_set_of_galleon_feature_packs"><a class="anchor" href="#_using_a_specific_set_of_galleon_feature_packs"></a><a class="link" href="#_using_a_specific_set_of_galleon_feature_packs">4.8. Using a specific set of Galleon feature-packs</a></h3>
<div class="paragraph">
<p>By default the latest WildFly Galleon feature-pack and extra Galleon feature-packs are used.
You have the ability to set a list of feature-packs using the <code>&lt;feature-packs&gt;</code> element.</p>
</div>
</div>
<div class="sect2">
<h3 id="_understanding_which_rule_selected_a_given_galleon_layer"><a class="anchor" href="#_understanding_which_rule_selected_a_given_galleon_layer"></a><a class="link" href="#_understanding_which_rule_selected_a_given_galleon_layer">4.9. Understanding which rule selected a given Galleon layer</a></h3>
<div class="paragraph">
<p>When setting <code>&lt;verbose&gt;true&lt;/verbose&gt;</code>, the set of rules that selected a given layer are printed in the console. Output example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>...
layers inclusion rules
* ee-core-profile-server
  - BASE_LAYER
* ee-concurrency
  - JAVA_TYPE: [jakarta.enterprise.concurrent.*]
* undertow-https
  - ADD_ON
...</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_a_simple_pom_xml_file_extract"><a class="anchor" href="#_a_simple_pom_xml_file_extract"></a><a class="link" href="#_a_simple_pom_xml_file_extract">4.10. A simple pom.xml file extract</a></h3>
<div class="paragraph">
<p>In this extract, the latest WildFly server version is used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
<span style="color:#070;font-weight:bold">&lt;build&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;plugins&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;plugin&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly.glow<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-glow-arquillian-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;version&gt;</span>1.0.0.Beta4<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;configuration&gt;</span>
              <span style="color:#070;font-weight:bold">&lt;expected-discovery&gt;</span>[cdi, ee-concurrency, ee-integration, elytron, messaging-activemq, naming, servlet, undertow]==<span style="color:#F00;background-color:#FAA">&gt;</span>ee-core-profile-server,ee-concurrency,messaging-activemq<span style="color:#070;font-weight:bold">&lt;/expected-discovery&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/configuration&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;executions&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;execution&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;id&gt;</span>scan<span style="color:#070;font-weight:bold">&lt;/id&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;goals&gt;</span>
                        <span style="color:#070;font-weight:bold">&lt;goal&gt;</span>scan<span style="color:#070;font-weight:bold">&lt;/goal&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;/goals&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;phase&gt;</span>test-compile<span style="color:#070;font-weight:bold">&lt;/phase&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;/execution&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/executions&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/plugin&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;plugin&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly.plugins<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-maven-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;version&gt;</span>5.0.0.Alpha2<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;configuration&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;overwrite-provisioned-server&gt;</span>true<span style="color:#070;font-weight:bold">&lt;/overwrite-provisioned-server&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;provisioning-dir&gt;</span>${project.build.directory}/wildfly<span style="color:#070;font-weight:bold">&lt;/provisioning-dir&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;provisioning-file&gt;</span>${project.build.directory}/glow-scan/provisioning.xml<span style="color:#070;font-weight:bold">&lt;/provisioning-file&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/configuration&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;executions&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;execution&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;id&gt;</span>test-provisioning<span style="color:#070;font-weight:bold">&lt;/id&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;goals&gt;</span>
                        <span style="color:#070;font-weight:bold">&lt;goal&gt;</span>provision<span style="color:#070;font-weight:bold">&lt;/goal&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;/goals&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;phase&gt;</span>test-compile<span style="color:#070;font-weight:bold">&lt;/phase&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;/execution&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/executions&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/plugin&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/plugins&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/build&gt;</span>
...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_a_custom_pom_xml_file_extract"><a class="anchor" href="#_a_custom_pom_xml_file_extract"></a><a class="link" href="#_a_custom_pom_xml_file_extract">4.11. A custom pom.xml file extract</a></h3>
<div class="paragraph">
<p>In this extract, WildFly 30.0.1.Final is used, the <code>ssl</code> add-on is enabled, expected discovery and expected errors are configured.
The WildFly Maven Plugin is used to provision the server used by tests.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
<span style="color:#070;font-weight:bold">&lt;build&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;plugins&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;plugin&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly.glow<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-glow-arquillian-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;version&gt;</span>1.0.0.Alpha12<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;configuration&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;feature-packs&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;feature-pack&gt;</span>
                        <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
                        <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-galleon-pack<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
                        <span style="color:#070;font-weight:bold">&lt;version&gt;</span>30.0.1.Final<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;/feature-pack&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;/feature-packs&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;add-ons&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;add-on&gt;</span>ssl<span style="color:#070;font-weight:bold">&lt;/add-on&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;/add-ons&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;expected-errors&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;error&gt;</span>an add-on of the messaging family is expected by the messaging-activemq layer<span style="color:#070;font-weight:bold">&lt;/error&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;error&gt;</span>ambiguous resource injection. Enable verbose output to see the locations.<span style="color:#070;font-weight:bold">&lt;/error&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;error&gt;</span>jakarta.naming.Context or InitialContext lookup. Enable verbose output to see the locations.<span style="color:#070;font-weight:bold">&lt;/error&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;/expected-errors&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;expected-discovery&gt;</span>[cdi, ee-concurrency, ee-integration, elytron, messaging-activemq, naming, servlet, undertow, undertow-https]==<span style="color:#F00;background-color:#FAA">&gt;</span>ee-core-profile-server,ee-concurrency,messaging-activemq,undertow-https<span style="color:#070;font-weight:bold">&lt;/expected-discovery&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/configuration&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;executions&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;execution&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;id&gt;</span>scan<span style="color:#070;font-weight:bold">&lt;/id&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;goals&gt;</span>
                        <span style="color:#070;font-weight:bold">&lt;goal&gt;</span>scan<span style="color:#070;font-weight:bold">&lt;/goal&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;/goals&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;phase&gt;</span>test-compile<span style="color:#070;font-weight:bold">&lt;/phase&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;/execution&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/executions&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/plugin&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;plugin&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly.plugins<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-maven-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;version&gt;</span>5.0.0.Alpha2<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;configuration&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;overwrite-provisioned-server&gt;</span>true<span style="color:#070;font-weight:bold">&lt;/overwrite-provisioned-server&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;provisioning-dir&gt;</span>${project.build.directory}/wildfly<span style="color:#070;font-weight:bold">&lt;/provisioning-dir&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;provisioning-file&gt;</span>${project.build.directory}/glow-scan/provisioning.xml<span style="color:#070;font-weight:bold">&lt;/provisioning-file&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/configuration&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;executions&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;execution&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;id&gt;</span>test-provisioning<span style="color:#070;font-weight:bold">&lt;/id&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;goals&gt;</span>
                        <span style="color:#070;font-weight:bold">&lt;goal&gt;</span>provision<span style="color:#070;font-weight:bold">&lt;/goal&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;/goals&gt;</span>
                    <span style="color:#070;font-weight:bold">&lt;phase&gt;</span>test-compile<span style="color:#070;font-weight:bold">&lt;/phase&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;/execution&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/executions&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/plugin&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/plugins&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/build&gt;</span>
...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_goals_overview"><a class="anchor" href="#_goals_overview"></a><a class="link" href="#_goals_overview">4.12. Goals overview</a></h3>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_help">help</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prints help for the plugin.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_scan">scan</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scan test classes, create deployments and generate provisioning.xml.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_help"><a class="anchor" href="#_help"></a><a class="link" href="#_help">4.13. help</a></h3>
<div class="sect3">
<h4 id="_wildfly_glow_arquillianhelp"><a class="anchor" href="#_wildfly_glow_arquillianhelp"></a><a class="link" href="#_wildfly_glow_arquillianhelp">4.13.1. wildfly-glow-arquillian:help</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong>
org.wildfly.glow:wildfly-glow-arquillian-plugin:1.4.0.Final:help</p>
</div>
</div>
<div class="sect3">
<h4 id="_description"><a class="anchor" href="#_description"></a><a class="link" href="#_description">4.13.2. Description</a></h4>
<div class="paragraph">
<p>Display help information on wildfly-glow-arquillian-plugin.<br>
Call <code>mvn wildfly-glow-arquillian:help -Ddetail=true
-Dgoal=&lt;goal-name&gt;</code> to display parameter details.</p>
</div>
</div>
<div class="sect3">
<h4 id="_attributes"><a class="anchor" href="#_attributes"></a><a class="link" href="#_attributes">4.13.3. Attributes</a></h4>
<div class="ulist">
<ul>
<li>
<p>The goal is thread-safe and supports parallel builds.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all fit-content stretch">
<caption class="title">Table 1. Optional Parameters</caption>
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#detail">[detail]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code>, display all settable properties for each
goal.<br>
<strong>Default value is</strong>: <code>false</code>.<br>
<strong>User property is</strong>: <code>detail</code>.<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#goal">[goal]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the goal for which to show help. If unspecified, all
goals will be displayed.<br>
<strong>User property is</strong>: <code>goal</code>.<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#indentSize">[indentSize]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of spaces per indentation level, should be positive.<br>
<strong>Default value is</strong>: <code>2</code>.<br>
<strong>User property is</strong>: <code>indentSize</code>.<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#lineLength">[lineLength]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum length of a display line, should be positive.<br>
<strong>Default value is</strong>: <code>80</code>.<br>
<strong>User property is</strong>: <code>lineLength</code>.<br></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_parameter_details"><a class="anchor" href="#_parameter_details"></a><a class="link" href="#_parameter_details">4.13.4. Parameter Details</a></h4>
<div class="paragraph">
<p><a id="detail"></a> <strong>detail</strong><br>
If <code>true</code>, display all settable properties for each
goal.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>detail</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>false</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="goal"></a> <strong>goal</strong><br>
The name of the goal for which to show help. If unspecified, all
goals will be displayed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>goal</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="indentSize"></a> <strong>indentSize</strong><br>
The number of spaces per indentation level, should be positive.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>int</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>indentSize</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>2</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="lineLength"></a> <strong>lineLength</strong><br>
The maximum length of a display line, should be positive.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>int</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>lineLength</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>80</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scan"><a class="anchor" href="#_scan"></a><a class="link" href="#_scan">4.14. scan</a></h3>
<div class="sect3">
<h4 id="_wildfly_glow_arquillianscan"><a class="anchor" href="#_wildfly_glow_arquillianscan"></a><a class="link" href="#_wildfly_glow_arquillianscan">4.14.1. wildfly-glow-arquillian:scan</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong>
org.wildfly.glow:wildfly-glow-arquillian-plugin:1.4.0.Final:scan</p>
</div>
</div>
<div class="sect3">
<h4 id="_description_2"><a class="anchor" href="#_description_2"></a><a class="link" href="#_description_2">4.14.2. Description</a></h4>
<div class="paragraph">
<p>(no description)</p>
</div>
</div>
<div class="sect3">
<h4 id="_attributes_2"><a class="anchor" href="#_attributes_2"></a><a class="link" href="#_attributes_2">4.14.3. Attributes</a></h4>
<div class="ulist">
<ul>
<li>
<p>Requires a Maven project to be executed.</p>
</li>
<li>
<p>Requires dependency resolution of artifacts in scope: <code>test</code>.</p>
</li>
<li>
<p>Binds by default to the <a href="http://maven.apache.org/ref/current/maven-core/lifecycles.html">lifecycle phase</a>: <code>test</code>.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all fit-content stretch">
<caption class="title">Table 2. Optional Parameters</caption>
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#addOns">[addOns]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Set</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Execution add-ons.<br>
<strong>User property is</strong>: <code>org.wildfly.glow.add-ons</code>.<br>
<strong>Alias is</strong>: <code>add-ons</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#aggregate">[aggregate]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All executions sharing the same aggregate have their
provisioning.xml merged inside a single one. Make sure to have
config-name parameter fo each execution sharing the same
aggregates.<br>
<strong>User property is</strong>: <code>org.wildfly.glow.aggregate</code>.<br>
<strong>Alias is</strong>: <code>aggregate</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#channels">[channels]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+
<strong>User property is</strong>: <code>org.wildfly.glow.channels</code>.<br>
<strong>Alias is</strong>: <code>channels</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#checkErrors">[checkErrors]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default the execution is aborted when unknown errors are
reported. You can disable the check done for errors by setting this
option to true.<br>
<strong>User property is</strong>: <code>org.wildfly.glow.check-errors</code>.<br>
<strong>Alias is</strong>: <code>check-errors</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#configName">[configName]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server configuration name in the generated provisioning.xml.<br>
<strong>Default value is</strong>: <code>standalone.xml</code>.<br>
<strong>User property is</strong>: <code>org.wildfly.glow.config-name</code>.<br>
<strong>Alias is</strong>: <code>config-name</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#context">[context]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Execution context, can be <code>cloud</code> or
<code>bare-metal</code>, default value is <code>bare-metal</code>,
only usable if no <code>feature-packs</code> have been set.<br>
<strong>User property is</strong>: <code>org.wildfly.glow.context</code>.<br>
<strong>Alias is</strong>: <code>context</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#dependenciesToScan">[dependenciesToScan]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GroupId:ArtifactId of dependencies that contain test classes to
scan for Arquillian deployments.<br>
<strong>User property is</strong>: <code>org.wildfly.glow.dependencies-to-scan</code>.<br>
<strong>Alias is</strong>: <code>dependencies-to-scan</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#expectedDiscovery">[expectedDiscovery]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string identical to what this plugin output. It is used to
compare what the plugin has discovered vs what is expected.<br>
<strong>User property is</strong>: <code>org.wildfly.glow.expected-discovery</code>.<br>
<strong>Alias is</strong>: <code>expected-discovery</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#expectedErrors">[expectedErrors]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expects error to be found by glow (eg: missing datasource, &#8230;&#8203;)
that will get fixed by the test. If an error is found and this
parameter contains expected errors, the errors are ignored. If no
error is found and this parameter contains errors, an exception is
thrown. If this parameter is null (the default) and an error is
found, an exception is thrown.<br>
<strong>User property is</strong>: <code>org.wildfly.glow.expected-errors</code>.<br>
<strong>Alias is</strong>: <code>expected-errors</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#featurePacks">[featurePacks]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of feature-packs that are scanned and injected in the
generated provisioning.xml. This option can&#8217;t be used when
<code>server-version</code> or <code>preview</code> or
<code>context</code> are used.<br>
<strong>Alias is</strong>: <code>feature-packs</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#layersForJndi">[layersForJndi]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Set</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(no description)<br>
<strong>User property is</strong>: <code>org.wildfly.glow.layers-for-jndi</code>.<br>
<strong>Alias is</strong>: <code>add-layers-for-jndi</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#previewServer">[previewServer]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use WildFly Preview server, only usable if no
<code>feature-packs</code> have been set.<br>
<strong>User property is</strong>: <code>org.wildfly.glow.preview-server</code>.<br>
<strong>Alias is</strong>: <code>preview-server</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#profile">[profile]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Execution profile.<br>
<strong>User property is</strong>: <code>org.wildfly.glow.profile</code>.<br>
<strong>Alias is</strong>: <code>profile</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#serverVersion">[serverVersion]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A WildFly server version. The latest version is the default, only
usable if no <code>feature-packs</code> have been set.<br>
<strong>User property is</strong>: <code>org.wildfly.glow.server-version</code>.<br>
<strong>Alias is</strong>: <code>server-version</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#skipScanning">[skipScanning]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not lookup deployments to scan.<br>
<strong>User property is</strong>: <code>org.wildfly.glow.skip-scanning</code>.<br>
<strong>Alias is</strong>: <code>skip-scanning</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#surefireExecutionForIncludedClasses">[surefireExecutionForIncludedClasses]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If not specified, it will search all test classes for @Deployment
annotated methods. If a surefire execution name is specified, it
will only look at test classes picked out by its import/export
filters. If set, it will also output the provisioning.xml file in a
child folder of that name.<br>
<strong>Alias is</strong>: <code>surefire-execution-for-included-classes</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#systemPropertyVariables">[systemPropertyVariables]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System properties to set. For example, you can set
org.wildfly.glow.manual.layers system property to a list of layers
to add to the discovered set.<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#verbose">[verbose]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable verbose output (containing identified errors, suggestions,
&#8230;&#8203;).<br>
<strong>User property is</strong>: <code>org.wildfly.glow.verbose</code>.<br></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_parameter_details_2"><a class="anchor" href="#_parameter_details_2"></a><a class="link" href="#_parameter_details_2">4.14.4. Parameter Details</a></h4>
<div class="paragraph">
<p><a id="addOns"></a> <strong>addOns</strong><br>
Execution add-ons.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.util.Set</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.add-ons</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>add-ons</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="aggregate"></a> <strong>aggregate</strong><br>
All executions sharing the same aggregate have their
provisioning.xml merged inside a single one. Make sure to have
config-name parameter fo each execution sharing the same
aggregates.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.aggregate</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>aggregate</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="channels"></a> <strong>channels</strong><br></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.util.List</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.channels</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>channels</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="checkErrors"></a> <strong>checkErrors</strong><br>
By default the execution is aborted when unknown errors are
reported. You can disable the check done for errors by setting this
option to true.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.check-errors</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>check-errors</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="configName"></a> <strong>configName</strong><br>
Server configuration name in the generated provisioning.xml.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.config-name</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>standalone.xml</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>config-name</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="context"></a> <strong>context</strong><br>
Execution context, can be <code>cloud</code> or
<code>bare-metal</code>, default value is <code>bare-metal</code>,
only usable if no <code>feature-packs</code> have been set.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.context</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>context</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="dependenciesToScan"></a> <strong>dependenciesToScan</strong><br>
GroupId:ArtifactId of dependencies that contain test classes to
scan for Arquillian deployments.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.util.List</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.dependencies-to-scan</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>dependencies-to-scan</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="expectedDiscovery"></a> <strong>expectedDiscovery</strong><br>
A string identical to what this plugin output. It is used to
compare what the plugin has discovered vs what is expected.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.expected-discovery</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>expected-discovery</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="expectedErrors"></a> <strong>expectedErrors</strong><br>
Expects error to be found by glow (eg: missing datasource, &#8230;&#8203;)
that will get fixed by the test. If an error is found and this
parameter contains expected errors, the errors are ignored. If no
error is found and this parameter contains errors, an exception is
thrown. If this parameter is null (the default) and an error is
found, an exception is thrown.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.util.List</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.expected-errors</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>expected-errors</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="featurePacks"></a> <strong>featurePacks</strong><br>
List of feature-packs that are scanned and injected in the
generated provisioning.xml. This option can&#8217;t be used when
<code>server-version</code> or <code>preview</code> or
<code>context</code> are used.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.util.List</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>feature-packs</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="layersForJndi"></a> <strong>layersForJndi</strong><br>
(no description)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.util.Set</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.layers-for-jndi</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>add-layers-for-jndi</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="previewServer"></a> <strong>previewServer</strong><br>
Use WildFly Preview server, only usable if no
<code>feature-packs</code> have been set.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.preview-server</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>preview-server</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="profile"></a> <strong>profile</strong><br>
Execution profile.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.profile</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>profile</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="serverVersion"></a> <strong>serverVersion</strong><br>
A WildFly server version. The latest version is the default, only
usable if no <code>feature-packs</code> have been set.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.server-version</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>server-version</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="skipScanning"></a> <strong>skipScanning</strong><br>
Do not lookup deployments to scan.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.skip-scanning</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>skip-scanning</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="surefireExecutionForIncludedClasses"></a> <strong>surefireExecutionForIncludedClasses</strong><br>
If not specified, it will search all test classes for @Deployment
annotated methods. If a surefire execution name is specified, it
will only look at test classes picked out by its import/export
filters. If set, it will also output the provisioning.xml file in a
child folder of that name.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>surefire-execution-for-included-classes</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="systemPropertyVariables"></a> <strong>systemPropertyVariables</strong><br>
System properties to set. For example, you can set
org.wildfly.glow.manual.layers system property to a list of layers
to add to the discovered set.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.util.Map</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="verbose"></a> <strong>verbose</strong><br>
Enable verbose output (containing identified errors, suggestions,
&#8230;&#8203;).</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>org.wildfly.glow.verbose</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="glow_server"><a class="anchor" href="#glow_server"></a><a class="link" href="#glow_server">5. Support for latest WildFly</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following documentation is defined by the <a href="https://github.com/wildfly/wildfly-galleon-feature-packs">WildFly Galleon Feature-packs repository</a>.
It contains the known WildFly (and WildFly Preview) Feature-packs, Layers and Add-ons for the various execution contexts (<code>cloud</code> and <code>bare-metal</code>).</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://docs.wildfly.org/wildfly-galleon-feature-packs/">Known Feature-packs, Layers and Add-ons</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jbang"><a class="anchor" href="#jbang"></a><a class="link" href="#jbang">6. Running WildFly with JBang</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://www.jbang.dev">JBang</a> is a tool to create, edit and run self-contained source-only Java programs with unprecedented ease.</p>
</div>
<div class="paragraph">
<p>By using JBang and Glow, you can run a singe Java file in WildFly.</p>
</div>
<div class="paragraph">
<p>You can install JBang from its <a href="https://www.jbang.dev/download/">Download page</a>.</p>
</div>
<div class="sect2">
<h3 id="_enabling_wildfly_glow_integration_from_jbang"><a class="anchor" href="#_enabling_wildfly_glow_integration_from_jbang"></a><a class="link" href="#_enabling_wildfly_glow_integration_from_jbang">6.1. Enabling WildFly Glow integration from JBang</a></h3>
<div class="paragraph">
<p>To run Glow with JBang, you need to add a dependency to <code>org.wildfly.glow:wildfly-glow</code> in the Java source file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">//DEPS org.wildfly.glow:wildfly-glow:1.4.0.Final</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_glow_arguments"><a class="anchor" href="#_glow_arguments"></a><a class="link" href="#_glow_arguments">6.2. Glow arguments</a></h3>
<div class="paragraph">
<p>There are cases where you want to add additional Glow add-ons to enable additional features.
You can specify them directly in your Java source file with <code>//GLOW</code> comments.</p>
</div>
<div class="paragraph">
<p>For example, to enable health &amp; metrics on your application, you just need to add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">//GLOW --add-ons=health,metrics</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This comment will provision WildFly with metrics and health enabled
so that the application healthiness can be checked at <a href="http://localhost:9990/health" class="bare">http://localhost:9990/health</a>
and its metrics are available at <a href="http://localhost:9990/metrics" class="bare">http://localhost:9990/metrics</a></p>
</div>
<div class="paragraph">
<p>By default, Glow will use the latest available version of WildFly. You can specify a given version with the <code>--server-version</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">//GLOW --server-version=35.0.1.Final</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The arguments to the <code>//GLOW</code> comments are directly passed to the Glow <code>scan</code> command that scan the application and create the WildFly Bootable Jar.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples"><a class="anchor" href="#_examples"></a><a class="link" href="#_examples">6.3. Examples</a></h3>
<div class="sect3">
<h4 id="_simple_web_application"><a class="anchor" href="#_simple_web_application"></a><a class="link" href="#_simple_web_application">6.3.1. Simple Web application</a></h4>
<div class="paragraph">
<p>The simplest Web application that can be run with JBang and WildFly is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">///usr/bin/env jbang &quot;$0&quot; &quot;$@&quot; ; exit $?</span>
<span style="color:#777">//JAVA 17+</span>
<span style="color:#777">//DEPS org.wildfly.bom:wildfly-expansion:${wildfly.version:35.0.1.Final}@pom </span><i class="conum" data-value="1"></i><b>(1)</b>
<span style="color:#777">//DEPS org.wildfly.glow:wildfly-glow:1.4.0.Final </span><i class="conum" data-value="2"></i><b>(2)</b>
<span style="color:#777">//DEPS jakarta.ws.rs:jakarta.ws.rs-api</span>
<span style="color:#777">//DEPS jakarta.enterprise:jakarta.enterprise.cdi-api</span>

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.enterprise.context.ApplicationScoped</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.ws.rs.GET</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.ws.rs.Path</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.ws.rs.ApplicationPath</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.ws.rs.core.Application</span>;

<span style="color:#007">@ApplicationPath</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/</span><span style="color:#710">&quot;</span></span>)
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">myapp</span> <span style="color:#088;font-weight:bold">extends</span> Application {

    <span style="color:#007">@Path</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/hello</span><span style="color:#710">&quot;</span></span>)
    <span style="color:#007">@ApplicationScoped</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Hello</span> {

        <span style="color:#007">@GET</span>
        <span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">String</span> sayHello() {
            <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello, WildFly!</span><span style="color:#710">&quot;</span></span>;
        }

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This POM is used to find the version of other dependencies provided by WildFly such as CDI</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This dependency is required to trigger the WildFly Glow integration and run the application in WildFly</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Save this code snippet in a <code>myapp.java</code> and then you can run it with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">jbang run myapp.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will compile the Java file, fetch its dependencies (specified from the <code>//DEPS</code> comments), provision a WildFly Bootable Jar with Glow and execute it.</p>
</div>
<div class="paragraph">
<p>With that command you will run a WildFly server with the Web application deployed and available at <code><a href="http://localhost:8080/myapp/hello" class="bare">http://localhost:8080/myapp/hello</a></code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_microprofile_example"><a class="anchor" href="#_microprofile_example"></a><a class="link" href="#_microprofile_example">6.3.2. MicroProfile Example</a></h4>
<div class="paragraph">
<p>If you want to use MicroProfile Config in your application, all you need to do is add a dependency to <code>org.eclipse.microprofile.config:microprofile-config-api</code>, import the packages to compile your code and use MicroProfile Config API as usual:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">///usr/bin/env jbang &quot;$0&quot; &quot;$@&quot; ; exit $?</span>
<span style="color:#777">//JAVA 17+</span>
<span style="color:#777">//DEPS org.wildfly.bom:wildfly-expansion:${wildfly.version:35.0.1.Final}@pom</span>
<span style="color:#777">//DEPS org.wildfly.glow:wildfly-glow:1.4.0.Final</span>
<span style="color:#777">//DEPS jakarta.ws.rs:jakarta.ws.rs-api</span>
<span style="color:#777">//DEPS jakarta.enterprise:jakarta.enterprise.cdi-api</span>
<span style="color:#777">//DEPS org.eclipse.microprofile.config:microprofile-config-api </span><i class="conum" data-value="1"></i><b>(1)</b>

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.enterprise.context.ApplicationScoped</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.inject.Inject</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.ws.rs.GET</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.ws.rs.Path</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.ws.rs.ApplicationPath</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.ws.rs.core.Application</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">org.eclipse.microprofile.config.inject.ConfigProperty</span>;

<span style="color:#007">@ApplicationPath</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/</span><span style="color:#710">&quot;</span></span>)
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">myapp</span> <span style="color:#088;font-weight:bold">extends</span> Application {

    <span style="color:#007">@Path</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/hello</span><span style="color:#710">&quot;</span></span>)
    <span style="color:#007">@ApplicationScoped</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Hello</span> {

        <span style="color:#007">@Inject</span>
        <span style="color:#007">@ConfigProperty</span>(name = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">nick.name</span><span style="color:#710">&quot;</span></span>, defaultValue = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">WildFly</span><span style="color:#710">&quot;</span></span>) <i class="conum" data-value="2"></i><b>(2)</b>
        <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> name;

        <span style="color:#007">@GET</span>
        <span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">String</span> sayHello() {
            <span style="color:#080;font-weight:bold">return</span> <span style="color:#0a8;font-weight:bold">String</span>.format(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello, %s!</span><span style="color:#710">&quot;</span></span>, name);
        }

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This new dependency is required to use MicroProfile Config</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This annotation inject a config property in the application with a <code>nick.name</code> system property or a <code>NICK_NAME</code> environment variable</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can then use an environment variable <code>NICK_NAME</code> to inject the <code>name</code> in your application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">NICK_NAME=Bob jbang run myapp.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you go to <a href="http://localhost:8080/myapp/hello" class="bare">http://localhost:8080/myapp/hello</a>, it will now display <code>Hello, Bob!</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ai_chat_example"><a class="anchor" href="#_ai_chat_example"></a><a class="link" href="#_ai_chat_example">6.4. AI Chat Example</a></h3>
<div class="paragraph">
<p>WildFly provides AI integration with its <a href="https://github.com/wildfly-extras/wildfly-ai-feature-pack">AI feature pack</a>.
This allows to write a simple chat bot that can be run with JBang</p>
</div>
<div class="sect3">
<h4 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a><a class="link" href="#_prerequisites">6.4.1. Prerequisites</a></h4>
<div class="paragraph">
<p>For the purpose of this application, we can use <a href="https://ollama.com">Ollama</a> to pull the AI model used by the application by running the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">podman run -d --rm --name ollama -p 11434:11434 -v ollama:/root/.ollama ollama/ollama
podman exec -it ollama ollama pull llama3.2:1b</code></pre>
</div>
</div>
<div class="paragraph">
<p>We now have a <code>llama3.2:1b</code> available on our local machine that can be used by the application.</p>
</div>
</div>
<div class="sect3">
<h4 id="_java_example"><a class="anchor" href="#_java_example"></a><a class="link" href="#_java_example">6.4.2. Java example</a></h4>
<div class="paragraph">
<p>Let&#8217;s write a <code>myaiapp.java</code> file to create a simple Chat:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">///usr/bin/env jbang &quot;$0&quot; &quot;$@&quot; ; exit $?</span>
<span style="color:#777">//JAVA 17+</span>
<span style="color:#777">//DEPS org.wildfly.bom:wildfly-expansion:${wildfly.version:35.0.1.Final}@pom</span>
<span style="color:#777">//DEPS org.wildfly.glow:wildfly-glow:1.4.0.Final</span>
<span style="color:#777">//DEPS jakarta.ws.rs:jakarta.ws.rs-api</span>
<span style="color:#777">//DEPS jakarta.enterprise:jakarta.enterprise.cdi-api</span>
<span style="color:#777">//DEPS dev.langchain4j:langchain4j:1.0.0-alpha1 </span><i class="conum" data-value="1"></i><b>(1)</b>
<span style="color:#777">//GLOW --spaces=incubating --server-version=35.0.1.Final </span><i class="conum" data-value="2"></i><b>(2)</b>

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">dev.langchain4j.model.chat.request.ChatRequest</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">dev.langchain4j.data.message</span>.*;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">dev.langchain4j.model.chat.ChatLanguageModel</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.enterprise.context.RequestScoped</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.inject</span>.*;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.ws.rs</span>.*;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">jakarta.ws.rs.core</span>.*;

<span style="color:#007">@ApplicationPath</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/</span><span style="color:#710">&quot;</span></span>)
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">myaiapp</span> <span style="color:#088;font-weight:bold">extends</span> Application {

    <span style="color:#007">@Path</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/chat</span><span style="color:#710">&quot;</span></span>)
    <span style="color:#007">@RequestScoped</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Chat</span> {

        <span style="color:#007">@Inject</span>
        <span style="color:#007">@Named</span>(value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ollama</span><span style="color:#710">&quot;</span></span>) <i class="conum" data-value="3"></i><b>(3)</b>
        ChatLanguageModel chatModel;

        <span style="color:#007">@GET</span>
        <span style="color:#007">@Produces</span>(MediaType.TEXT_HTML)
        <span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">String</span> chatWithAssistant(<span style="color:#007">@QueryParam</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">word</span><span style="color:#710">&quot;</span></span>) <span style="color:#0a8;font-weight:bold">String</span> word) {
            <span style="color:#080;font-weight:bold">try</span> {
                <span style="color:#080;font-weight:bold">return</span> chatModel.chat(ChatRequest.builder().messages(
                        SystemMessage
                                .from(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">
                                           You are a teacher that explain to kids the origin of some words.
                                               Your response must be polite, use the same language as the question, and be relevant to the question.
                                               Your answer must be embedded in HTML.
                                        </span><span style="color:#710">&quot;</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span>),
                        UserMessage.from(<span style="color:#0a8;font-weight:bold">String</span>.format(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">What is the etymology of %s?</span><span style="color:#710">&quot;</span></span>, word))).build())
                        .aiMessage().text();
            } <span style="color:#080;font-weight:bold">catch</span> (<span style="color:#C00;font-weight:bold">Exception</span> e) {
                <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">My failure reason is:</span><span style="color:#b0b">\n</span><span style="color:#b0b">\n</span><span style="color:#710">&quot;</span></span> + e.getMessage();
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add this dependency to use <a href="https://docs.langchain4j.dev">LangChain4j</a> in your application</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>WildFly AI feature pack is <code>incubating</code> so you need to pass the <code>--spaces=incubating</code> to provision it.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The chat model is based on <code>ollama</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once you have created this file, we can run it with JBang with the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">OLLAMA_CHAT_MODEL_NAME=llama3.2:1b jbang run --verbose myaiapp.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>We use the <code>OLLAMA_CHAT_MODEL_NAME</code> env var to specify with model is used by the application (this model was pulled by Ollama in the prerequisites section)</p>
</div>
<div class="paragraph">
<p>Once the application is up and running, you can access the <code><a href="http://localhost:8080/myaiapp/chat?word=Orange" class="bare">http://localhost:8080/myaiapp/chat?word=Orange</a></code> to learn more about the etymology of the "Orange" word.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.4.0.Final<br>
Last updated 2025-03-25 12:39:32 +0100
</div>
</div>
</body>
</html>